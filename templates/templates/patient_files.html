{% extends 'base.html' %}
{% block content %}

<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:48px;">
    <div>
        <h1 class="section-title" style="margin:0; font-size:24px;">PATIENT VAULT: {{ patient.username }}</h1>
        <div class="muted" style="color:#44ff44;">ACCESS GRANTED // SECURE SESSION ACTIVE</div>
    </div>
    <a href="{{ url_for('dashboard') }}" style="font-size:12px;">‚Üê RETURN TO DIRECTORY</a>
</div>

{% for file in files %}
<div style="display:flex; justify-content:space-between; align-items:center; padding:24px 0; border-bottom:1px solid #111;">
    <div>
        <div style="font-size:18px; font-weight:500; color:#fff;">{{ file.filename }}</div>
        <div class="muted">UPLOADED: {{ file.upload_date.strftime('%Y-%m-%d') }}</div>
    </div>

    <form action="{{ url_for('verify_view', file_id=file.id) }}" method="POST" style="display:flex; gap:16px; align-items:center;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div style="text-align:right;">
            <input type="password" name="pin_attempt" placeholder="CONFIRM DOCTOR PIN" maxlength="4" required 
                   style="width:180px; text-align:center; border-color:#444;">
        </div>
        
        <button style="border-color:#fff; color:#fff;">SECURE VIEW</button>
    </form>
</div>
{% else %}
<div style="padding:48px 0; text-align:center; color:#444; border:1px dashed #222;">
    VAULT IS EMPTY. NO RECORDS FOUND.
</div>
{% endfor %}

{% endblock %}