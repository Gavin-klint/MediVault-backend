{% extends 'base.html' %}
{% block content %}

<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px;">
    <div style="display:flex; align-items:center; gap:12px;">
        <div style="width:10px; height:10px; background:#44ff44; border-radius:50%; box-shadow:0 0 10px #44ff44; animation: pulse 2s infinite;"></div>
        <strong style="letter-spacing:1px; font-size:14px;">SECURE VIEWER // DECRYPTED IN MEMORY</strong>
    </div>
    <a href="{{ url_for('dashboard') }}" style="color:#888; border-bottom:1px solid #444;">CLOSE VIEWER [X]</a>
</div>

<div style="border:1px solid #333; height:80vh; background:#000; position:relative; overflow:hidden;">
    
    <div style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; 
                background:repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.02) 10px, rgba(255,255,255,0.02) 20px); z-index:10;">
    </div>

    <iframe 
        src="{{ url_for('get_file_content', file_id=file_id) }}" 
        style="width:100%; height:100%; border:none; background:#fff;"
        sandbox="allow-scripts allow-same-origin"
        referrerpolicy="no-referrer">
    </iframe>
</div>

<div style="text-align:center; margin-top:16px; color:#444; font-size:11px; letter-spacing:1px;">
    DO NOT PHOTOGRAPH SCREEN. SESSION ID: {{ session.get('_id', 'UNKNOWN') }}
</div>

<script>
    document.addEventListener('contextmenu', event => event.preventDefault());
</script>

<style>
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }
</style>

{% endblock %}
